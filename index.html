<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ØªØ³Ø¬ÙŠÙ„ Ø­ØµØµ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯ - Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù„Ù‡Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --primary: #6a2df3;
      --primary-dark: #4b1fad;
      --primary-light: #8a5cf5;
      --secondary: #ff8a3c;
      --secondary-light: #ffb37c;
      --accent: #22b8aa;
      --accent-light: #5ce0d2;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;

      --purple-gradient: linear-gradient(135deg, #6a2df3, #8a5cf5);
      --orange-gradient: linear-gradient(135deg, #ff8a3c, #ffb37c);
      --teal-gradient: linear-gradient(135deg, #22b8aa, #5ce0d2);

      --bg-light: #f7f4ff;
      --bg-white: #ffffff;
      --text-dark: #15162b;
      --text-light: #5d6680;

      --radius-lg: 20px;
      --radius-md: 12px;
      --radius-sm: 8px;

      --shadow-soft: 0 10px 25px rgba(106, 45, 243, 0.10);
      --shadow-medium: 0 15px 35px rgba(106, 45, 243, 0.15);
      --shadow-strong: 0 20px 50px rgba(106, 45, 243, 0.20);

      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Cairo', sans-serif;
      background: radial-gradient(circle at top left, #f7f4ff 0, #ffffff 45%, #efe9ff 100%);
      color: var(--text-dark);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
    }

    /* Ø®Ù„ÙÙŠØ© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© Ù†Ø§Ø¹Ù…Ø© */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 20% 20%, rgba(106,45,243,0.12), transparent 40%),
        radial-gradient(circle at 80% 30%, rgba(34,184,170,0.12), transparent 40%),
        radial-gradient(circle at 50% 80%, rgba(255,138,60,0.10), transparent 45%);
      z-index: -1;
      pointer-events: none;
    }

    .container { max-width: 1100px; margin: 0 auto; padding: 20px; }

    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .header { text-align: center; margin-bottom: 40px; position: relative; }
    .header::after {
      content: '';
      position: absolute;
      bottom: -10px;
      right: 50%;
      transform: translateX(50%);
      width: 110px;
      height: 4px;
      background: var(--purple-gradient);
      border-radius: 2px;
    }

    /* âœ… ØªØ¹Ø¯ÙŠÙ„: Ø¯Ø¹Ù… Ø´Ø¹Ø§Ø±ÙŠÙ† */
    .logo { display: inline-flex; align-items: center; gap: 15px; margin-bottom: 20px; text-decoration: none; flex-wrap: wrap; justify-content: center; }
    .logo-logos { display: inline-flex; align-items: center; gap: 14px; }
    .brand-sep {
      width: 40px; height: 40px;
      border-radius: 999px;
      background: rgba(106,45,243,0.08);
      color: var(--primary-dark);
      display:flex; align-items:center; justify-content:center;
      font-weight: 900;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(106,45,243,0.15);
    }

    .logo-img {
      width: 80px; height: 80px; border-radius: 50%;
      background: white; display: flex; align-items: center; justify-content: center;
      box-shadow: var(--shadow-soft);
      padding: 5px;
      border: 3px solid var(--primary-light);
    }
    .logo-img img { width: 70px; height: 70px; border-radius: 50%; object-fit: contain; }

    /* ØªÙ…ÙŠÙŠØ² Ø¨Ø³ÙŠØ· Ù„Ø´Ø¹Ø§Ø± Ø³ÙˆØ§Ø± Ø§Ù„Ø¹Ù„Ù… */
    .logo-img.school { border-color: rgba(34,184,170,0.9); }

    .logo-text { text-align: right; }
    .logo-text h1 {
      font-size: 2rem;
      margin-bottom: 5px;
      font-weight: 900;
      background: var(--purple-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .logo-text p { font-size: 1rem; color: var(--text-light); font-weight: 700; }

    .week-badge {
      display: inline-block;
      background: var(--orange-gradient);
      color: white;
      padding: 7px 18px;
      border-radius: 50px;
      font-weight: 900;
      margin-top: 10px;
      box-shadow: 0 4px 15px rgba(255, 138, 60, 0.3);
      font-size: 0.9rem;
    }

    .sub-badge {
      display: inline-block;
      background: rgba(34, 184, 170, 0.1);
      color: var(--accent);
      padding: 5px 15px;
      border-radius: 999px;
      font-size: 0.85rem;
      margin-top: 8px;
      font-weight: 800;
    }

    .registration-card {
      background: var(--bg-white);
      border-radius: var(--radius-lg);
      padding: 40px;
      box-shadow: var(--shadow-medium);
      margin-bottom: 30px;
      border: 1px solid rgba(106, 45, 243, 0.08);
    }

    /* Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙ‚Ø¯Ù… */
    .progress-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: 35px;
      position: relative;
      counter-reset: step;
      gap: 10px;
    }
    .progress-steps::before {
      content: '';
      position: absolute;
      top: 15px;
      right: 0;
      left: 0;
      height: 3px;
      background: #e5e7eb;
      z-index: 1;
    }
    .progress-bar {
      position: absolute;
      top: 15px;
      right: 0;
      height: 3px;
      background: var(--primary);
      z-index: 2;
      transition: var(--transition);
    }
    .step { position: relative; z-index: 3; text-align: center; width: 120px; }
    .step-icon {
      width: 36px; height: 36px; background: #e5e7eb; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 10px;
      color: var(--text-light);
      font-weight: 900;
      transition: var(--transition);
    }
    .step.active .step-icon { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(106, 45, 243, 0.3); }
    .step.completed .step-icon { background: var(--success); color: white; }
    .step-label { font-size: 0.85rem; color: var(--text-light); font-weight: 800; }
    .step.active .step-label { color: var(--primary); }

    /* Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
    .form-step { display: none; animation: fadeIn 0.5s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .form-step.active { display: block; }

    .form-header { margin-bottom: 25px; }
    .form-header h2 { color: var(--primary-dark); margin-bottom: 8px; font-size: 1.6rem; font-weight: 900; }
    .form-header p { color: var(--text-light); font-size: 0.95rem; font-weight: 700; }

    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
    .form-group { margin-bottom: 18px; }

    label { display: block; margin-bottom: 8px; color: var(--text-dark); font-weight: 800; font-size: 0.95rem; }
    .required::after { content: ' *'; color: var(--danger); }

    input, select, textarea {
      width: 100%;
      padding: 11px 15px;
      border: 2px solid #e5e7eb;
      border-radius: var(--radius-md);
      font-family: 'Cairo', sans-serif;
      font-size: 1rem;
      transition: var(--transition);
      background: var(--bg-white);
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(106, 45, 243, 0.1);
    }

    .error-message { color: var(--danger); font-size: 0.85rem; margin-top: 4px; display: none; font-weight: 800; }
    .form-hint { font-size: 0.8rem; color: var(--text-light); margin-top: 4px; font-weight: 700; }

    /* ØªÙ†Ø¨ÙŠÙ‡ */
    .transfer-info {
      background: linear-gradient(135deg, rgba(106,45,243,0.06), rgba(34,184,170,0.06));
      border-radius: var(--radius-lg);
      padding: 20px 22px;
      margin-bottom: 25px;
      border: 1px solid rgba(106,45,243,0.12);
    }
    .transfer-info h3 { margin-bottom: 8px; color: var(--primary-dark); font-size: 1rem; font-weight: 900; }
    .transfer-info ul { list-style: none; margin-top: 10px; padding-right: 0; color: var(--text-light); font-size: 0.9rem; font-weight: 700; }
    .transfer-info li { margin-bottom: 4px; }

    /* Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± */
    .offers-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px; margin: 25px 0 15px; }
    .offer-box {
      position: relative;
      background: white;
      border-radius: var(--radius-lg);
      padding: 18px 20px;
      border: 2px solid rgba(34,184,170,0.4);
      transition: var(--transition);
      box-shadow: var(--shadow-soft);
    }
    .offer-box:hover { transform: translateY(-4px); box-shadow: var(--shadow-medium); }
    .offer-box.best { border-color: var(--primary); background: linear-gradient(135deg, rgba(106,45,243,0.05), rgba(255,138,60,0.05)); }
    .offer-badge {
      position: absolute;
      top: -10px;
      left: 16px;
      background: var(--orange-gradient);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 900;
    }
    .offer-title { font-size: 1.1rem; color: var(--primary-dark); margin-bottom: 6px; font-weight: 900; }
    .offer-box p { font-size: 0.9rem; color: var(--text-light); font-weight: 700; }
    .price-large { font-size: 2rem; font-weight: 900; color: var(--primary); margin: 10px 0 4px; }
    .price-small { font-size: 0.9rem; color: var(--text-light); text-decoration: line-through; font-weight: 700; }
    .savings-badge { background: var(--success); color: white; padding: 4px 12px; border-radius: 20px; display: inline-block; margin-top: 8px; font-size: 0.8rem; font-weight: 900; }
    .note-pill { display: inline-flex; align-items: center; gap: 6px; background: rgba(16,185,129,0.08); color: var(--success); padding: 4px 10px; border-radius: 999px; font-size: 0.8rem; margin-top: 6px; font-weight: 900; }

    /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø­ØµØµ */
    .classes-section-title {
      color: var(--primary-dark);
      margin: 25px 0 8px;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 900;
    }
    .classes-section-title i { color: var(--primary); }

    .day-label {
      color: var(--primary);
      margin: 16px 0 8px;
      border-right: 4px solid var(--primary);
      padding-right: 10px;
      font-size: 0.98rem;
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 900;
    }
    .day-label i { color: var(--primary); }

    .classes-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }

    .class-item {
      position: relative;
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: var(--radius-md);
      padding: 12px 14px;
      cursor: pointer;
      transition: var(--transition);
      display: grid;
      grid-template-columns: 90px 1fr;
      gap: 14px;
      align-items: center;
      overflow: hidden;
    }
    .class-item:hover { border-color: var(--primary-light); box-shadow: var(--shadow-soft); transform: translateY(-2px); }

    /* Ø¹Ù„Ø§Ù…Ø© "ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±" + ØªØ­Ø³ÙŠÙ† Ø´ÙƒÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± */
    .selected-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: linear-gradient(135deg, #10b981, #22c55e);
      color: #fff;
      padding: 5px 12px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 900;
      display: none;
      align-items: center;
      gap: 6px;
      box-shadow: 0 6px 18px rgba(16,185,129,0.45);
      animation: popBadge 0.35s ease;
      z-index: 5;
    }
    @keyframes popBadge { from { transform: scale(0.6); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    .class-item.selected {
      border-color: #10b981;
      background: linear-gradient(135deg, rgba(16,185,129,0.06), rgba(34,197,94,0.06));
      box-shadow: 0 0 0 2px rgba(16,185,129,0.25), var(--shadow-soft);
    }

    .class-image-wrapper {
      width: 80px;
      height: 80px;
      border-radius: 18px;
      overflow: hidden;
      background: #f3f4ff;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 15px rgba(15,23,42,0.08);
      position: relative;
    }
    .class-image-wrapper img { width: 100%; height: 100%; object-fit: cover; cursor: zoom-in; }

    /* ØªÙ„Ù…ÙŠØ­ ØªÙƒØ¨ÙŠØ± */
    .zoom-hint {
      position: absolute;
      bottom: 6px;
      right: 6px;
      background: rgba(0,0,0,0.55);
      color: #fff;
      font-size: 0.68rem;
      padding: 3px 7px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-weight: 900;
    }

    .class-content { display: flex; flex-direction: column; gap: 4px; }
    .class-header { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
    .class-title { font-size: 1rem; color: var(--primary-dark); font-weight: 900; }
    .class-price { font-size: 0.95rem; font-weight: 900; color: var(--primary); text-align: left; }
    .class-price small { display: block; font-size: 0.75rem; color: var(--text-light); font-weight: 700; }
    .class-details { color: var(--text-light); font-size: 0.83rem; font-weight: 700; }
    .class-details i { color: var(--primary); margin-left: 4px; }

    .class-teacher {
      background: rgba(106, 45, 243, 0.08);
      padding: 4px 9px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--primary-dark);
      font-weight: 900;
      font-size: 0.78rem;
      margin-top: 4px;
      width: fit-content;
    }
    .class-teacher i { color: var(--primary); }

    /* Ù…Ù„Ø®Øµ Ù…Ø§Ù„ÙŠ */
    .summary-card { background: var(--bg-light); border-radius: var(--radius-md); padding: 18px 20px; margin-top: 20px; }
    .summary-card h3 { color: var(--primary-dark); margin-bottom: 10px; font-size: 1rem; font-weight: 900; }
    .summary-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(0, 0, 0, 0.04); font-size: 0.9rem; font-weight: 800; }
    .summary-item:last-child { border-bottom: none; }
    .summary-item.highlight span:last-child { font-weight: 900; color: var(--primary); }

    /* Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù */
    .upload-area {
      border: 2px dashed #e5e7eb;
      border-radius: var(--radius-lg);
      padding: 22px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      margin: 10px 0 8px;
      background: rgba(248,250,252,0.8);
    }
    .upload-area:hover { border-color: var(--primary); background: rgba(106, 45, 243, 0.02); }
    .upload-area.dragover { border-color: var(--primary); background: rgba(106,45,243,0.06); }
    .upload-icon { font-size: 2.2rem; color: var(--primary); margin-bottom: 8px; }
    .upload-text { color: var(--text-dark); margin-bottom: 4px; font-weight: 900; font-size: 0.95rem; }
    .upload-hint { color: var(--text-light); font-size: 0.8rem; font-weight: 700; }

    .file-preview {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(106, 45, 243, 0.05);
      padding: 10px 14px;
      border-radius: var(--radius-md);
      margin-top: 10px;
    }
    .file-info { display: flex; align-items: center; gap: 8px; }
    .file-icon { color: var(--primary); font-size: 1.3rem; }
    .file-name { font-weight: 900; color: var(--text-dark); font-size: 0.9rem; }
    .file-size { color: var(--text-light); font-size: 0.8rem; font-weight: 700; }
    .file-remove { background: none; border: none; color: var(--danger); cursor: pointer; font-size: 1.1rem; }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .form-buttons { display: flex; justify-content: space-between; margin-top: 30px; gap: 12px; }
    .btn {
      padding: 11px 22px;
      border-radius: var(--radius-md);
      border: none;
      font-family: 'Cairo', sans-serif;
      font-size: 0.95rem;
      font-weight: 900;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
    }

    .btn-primary {
      background: var(--purple-gradient);
      color: white;
      box-shadow: var(--shadow-soft);
      background-size: 200% 200%;
      animation: gradientMove 4s ease infinite;
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .btn-primary:hover { transform: translateY(-1px); box-shadow: var(--shadow-medium); }

    .btn-secondary { background: transparent; color: var(--primary); border: 2px solid var(--primary); }
    .btn-secondary:hover { background: rgba(106,45,243,0.05); }

    .btn-success { background: var(--success); color: white; }
    .btn-success:hover { background: #0da271; transform: translateY(-1px); }

    .btn-warning { background: var(--warning); color: white; }

    .btn-disabled { background: #e5e7eb !important; color: #9ca3af !important; cursor: not-allowed !important; animation: none !important; }

    .btn-icon { font-size: 1rem; }

    /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
    .message { padding: 13px 15px; border-radius: var(--radius-md); margin: 15px 0; display: none; font-size: 0.9rem; font-weight: 900; }
    .message.success { background: rgba(16, 185, 129, 0.08); border: 1px solid rgba(16, 185, 129, 0.25); color: var(--success); }
    .message.error { background: rgba(239, 68, 68, 0.08); border: 1px solid rgba(239, 68, 68, 0.25); color: var(--danger); }
    .message.info { background: rgba(106, 45, 243, 0.08); border: 1px solid rgba(106, 45, 243, 0.25); color: var(--primary); }
    .message i { margin-left: 6px; }

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ */
    .success-message {
      background: rgba(16, 185, 129, 0.06);
      border: 2px solid rgba(16,185,129,0.4);
      border-radius: var(--radius-lg);
      padding: 24px 22px;
      text-align: center;
      margin: 15px 0;
    }
    .success-icon { font-size: 3rem; color: var(--success); margin-bottom: 8px; }
    .reference-id {
      background: white;
      padding: 12px 14px;
      border-radius: var(--radius-md);
      margin: 16px 0;
      border: 2px dashed var(--success);
      font-size: 0.95rem;
      font-weight: 900;
    }
    .reference-id strong { color: var(--text-dark); font-size: 1.1rem; direction: ltr; display: block; margin-top: 3px; }

    .registration-result { display: none; }

    /* Ø§Ù„Ù„ÙˆØ¯Ø± */
    .loader { display: none; text-align: center; padding: 18px 0 6px; }
    .loader-spinner {
      width: 40px; height: 40px;
      border: 3px solid #e5e7eb;
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    /* Ø§Ù„ÙÙˆØªØ± */
    .footer { text-align: center; margin-top: 35px; padding-top: 18px; border-top: 1px solid #e5e7eb; color: var(--text-light); font-size: 0.86rem; font-weight: 800; }
    .contact-info { display: flex; justify-content: center; gap: 14px; margin-top: 10px; flex-wrap: wrap; }
    .contact-item {
      display: flex;
      align-items: center;
      gap: 6px;
      background: rgba(106, 45, 243, 0.04);
      padding: 7px 11px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 900;
    }
    .contact-item i { color: var(--primary); }

    /* Lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 20px;
    }
    .lightbox.active { display: flex; }
    .lightbox-content {
      max-width: 900px;
      width: 100%;
      border-radius: 18px;
      overflow: hidden;
      background: #111827;
      box-shadow: 0 30px 80px rgba(0,0,0,0.55);
      position: relative;
    }
    .lightbox-img {
      width: 100%;
      height: auto;
      display: block;
      max-height: 80vh;
      object-fit: contain;
      background: #0b1220;
    }
    .lightbox-close {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      color: #fff;
      border-radius: 999px;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: 900;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .lightbox-close:hover { background: rgba(255,255,255,0.18); }

    /* Ø±ÙŠØ³Ø¨ÙˆÙ†Ø³ÙŠÙ */
    @media (max-width: 768px) {
      .container { padding: 8px; }
      .registration-card { padding: 22px 16px; }
      .form-grid { grid-template-columns: 1fr; }
      .progress-steps { flex-wrap: wrap; justify-content: center; }
      .step { width: auto; }
      .form-buttons { flex-direction: column; }
      .btn { width: 100%; }
      .class-item { grid-template-columns: 70px 1fr; }
      .class-image-wrapper { width: 70px; height: 70px; }

      /* âœ… ØªØ±ØªÙŠØ¨ Ø£Ø¬Ù…Ù„ Ù„Ù„Ø´Ø¹Ø§Ø±ÙŠÙ† Ø¨Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
      .logo-logos { width: 100%; justify-content: center; }
      .logo-text { width: 100%; text-align: center; }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <div class="header">
      <div class="logo">

        <!-- âœ… Ø§Ù„Ø´Ø¹Ø§Ø±ÙŠÙ† (Ø³ÙˆØ§Ø± Ø§Ù„Ø¹Ù„Ù… + Ù…Ù„Ù‡Ù…) -->
        <div class="logo-logos">
          <div class="logo-img school" title="Ù…Ø¯Ø±Ø³Ø© Ø³ÙˆØ§Ø± Ø§Ù„Ø¹Ù„Ù… Ø§Ù„Ø®Ø§ØµØ©">
            <img src="https://f.top4top.io/p_36353n4wj1.jpeg" alt="Ø´Ø¹Ø§Ø± Ù…Ø¯Ø±Ø³Ø© Ø³ÙˆØ§Ø± Ø§Ù„Ø¹Ù„Ù… Ø§Ù„Ø®Ø§ØµØ©">
          </div>

          <div class="brand-sep" title="Ø´Ø±Ø§ÙƒØ©">Ã—</div>

          <div class="logo-img" title="Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù„Ù‡Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©">
            <img src="https://h.top4top.io/p_3622qldhs1.png" alt="Ø´Ø¹Ø§Ø± Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù„Ù‡Ù…">
          </div>
        </div>

        <!-- Ø§Ù„Ù†Øµ ÙƒÙ…Ø§ Ù‡Ùˆ ÙÙŠ Ù…Ù„ÙÙƒ -->
        <div class="logo-text">
          <h1>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù„Ù‡Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h1>
          <p>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ø­ØµØµ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯</p>
          <div class="week-badge">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠ Ø¹Ù† Ø¨Ø¹Ø¯ â¬… Ù…Ù† Ø§Ù„Ø£Ø­Ø¯ 13 Ø¯ÙŠØ³Ù…Ø¨Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¨Øª 19 Ø¯ÙŠØ³Ù…Ø¨Ø±</div>
          <div class="sub-badge">Ø³Ø¹Ø± Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ â€“ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„: 2 Ø±ÙŠØ§Ù„ ÙÙ‚Ø· Ù„Ù„Ø­ØµØ© ğŸ¯</div>
        </div>
      </div>
    </div>

    <!-- Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙ‚Ø¯Ù… -->
    <div class="progress-steps">
      <div class="progress-bar" id="progressBar"></div>

      <div class="step active" data-step="1">
        <div class="step-icon">1</div>
        <div class="step-label">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­ØµØµ</div>
      </div>

      <div class="step" data-step="2">
        <div class="step-icon">2</div>
        <div class="step-label">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨</div>
      </div>

      <div class="step" data-step="3">
        <div class="step-icon">3</div>
        <div class="step-label">Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ</div>
      </div>

      <div class="step" data-step="4">
        <div class="step-icon">4</div>
        <div class="step-label">Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„</div>
      </div>
    </div>

    <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… -->
    <div class="message success" id="successMessage">
      <i class="fas fa-check-circle"></i>
      <span id="successText"></span>
    </div>

    <div class="message error" id="errorMessage">
      <i class="fas fa-exclamation-circle"></i>
      <span id="errorText"></span>
    </div>

    <div class="message info" id="infoMessage">
      <i class="fas fa-info-circle"></i>
      <span id="infoText"></span>
    </div>

    <!-- Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="registration-card">

      <!-- ===================== Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­ØµØµ ===================== -->
      <div class="form-step active" id="step1">
        <div class="form-header">
          <h2>Ø§Ø®ØªÙŠØ§Ø± Ø­ØµØµ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯</h2>
          <p>Ø§Ø®ØªØ± Ø­ØµØµÙƒ Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø«Ù… Ø§Ù†ØªÙ‚Ù„ Ù„ØªØ¹Ø¨Ø¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨. (Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ù„Ù… Ù„ØªÙƒØ¨ÙŠØ±Ù‡Ø§)</p>
        </div>

        <!-- ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù… -->
        <div class="transfer-info">
          <h3><i class="fas fa-bullhorn"></i> ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù… Ø­ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø¹Ù† Ø¨Ø¹Ø¯</h3>
          <p>
            Ø§Ù„Ø­ØµØµ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø®Ø§ØµØ© Ø¨Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯ØŒ ÙˆØªÙ‚Ø§Ù… Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø©
            <strong>Ù…Ù† Ø§Ù„Ø£Ø­Ø¯ 13 Ø¯ÙŠØ³Ù…Ø¨Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¨Øª 19 Ø¯ÙŠØ³Ù…Ø¨Ø±</strong>.
          </p>
          <ul>
            <li>âœ… Ø³Ø¹Ø± Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ØŒ ÙˆÙ„ÙØªØ±Ø© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠ ÙŠÙˆØ¬Ø¯ Ø®ØµÙ… Ø±ÙŠØ§Ù„ Ù„Ù„Ø­ØµØ© (Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙØ¹Ù„ÙŠ 2 Ø±ÙŠØ§Ù„).</li>
            <li>ğŸ Ø¥Ø°Ø§ Ø§Ø®ØªØ§Ø± Ø§Ù„Ø·Ø§Ù„Ø¨ 3 Ø­ØµØµØŒ ØªØµØ¨Ø­ <strong>Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</strong> âœ 4 Ø­ØµØµ Ø¨Ù€ 6 Ø±ÙŠØ§Ù„Ø§Øª ÙÙ‚Ø·.</li>
          </ul>
        </div>

        <!-- Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
        <div class="offers-container">
          <div class="offer-box best">
            <div class="offer-badge">Ø§Ù„Ø£Ù‚ÙˆÙ‰ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div>
            <div class="offer-title">ğŸ Ø¹Ø±Ø¶ 4 Ø­ØµØµ</div>
            <p>Ø§Ø®ØªØ± 3 Ø­ØµØµØŒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ù…Ø¬Ø§Ù†Ù‹Ø§.</p>
            <div class="price-large">6 Ø±ÙŠØ§Ù„</div>
            <div class="price-small">Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 12 Ø±ÙŠØ§Ù„ (Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)</div>
            <div class="savings-badge">ØªÙˆÙÙŠØ± 6 Ø±ÙŠØ§Ù„Ø§Øª</div>
            <div class="note-pill">
              <i class="fas fa-lightbulb"></i>
              Ù…Ø·Ø¨Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± 4 Ø­ØµØµ Ø£Ùˆ Ø£ÙƒØ«Ø± (Ø­ØµØ© ÙˆØ§Ø­Ø¯Ø© Ù…Ø¬Ø§Ù†Ù‹Ø§ ÙÙ‚Ø·).
            </div>
          </div>

          <div class="offer-box">
            <div class="offer-title">ğŸ’¡ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„</div>
            <p>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø­ØµØ© 3 Ø±ÙŠØ§Ù„ØŒ ÙˆØªÙ… ØªØ®ÙÙŠØ¶Ù‡ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¥Ù„Ù‰:</p>
            <div class="price-large">2 Ø±ÙŠØ§Ù„</div>
            <div class="price-small">Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 3 Ø±ÙŠØ§Ù„ Ù„Ù„Ø­ØµØ©</div>
            <div class="savings-badge">Ø®ØµÙ… Ø±ÙŠØ§Ù„ Ø¹Ù† ÙƒÙ„ Ø­ØµØ©</div>
            <p style="margin-top: 8px; font-size: 0.85rem; color: var(--text-light);">
              Ø§Ù„Ø®ØµÙ… ÙŠØ·Ø¨Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©.
            </p>
          </div>
        </div>

        <h3 class="classes-section-title">
          <i class="fas fa-laptop"></i>
          Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¹Ù† Ø¨Ø¹Ø¯ (Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„Ø­ØµØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…: 2 Ø±ÙŠØ§Ù„)
        </h3>

        <!-- ÙŠÙˆÙ… Ø§Ù„Ø£Ø­Ø¯ -->
        <div class="day-label"><i class="far fa-calendar-alt"></i> Ø§Ù„Ø£Ø­Ø¯</div>
        <div class="classes-grid">
          <div class="class-item" data-id="class4" onclick="selectClass('class4', 'ÙƒÙŠÙ…ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://l.top4top.io/p_3632u750f5.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§ØªÙ…ÙŠ')">
              <img src="https://l.top4top.io/p_3632u750f5.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§ØªÙ…ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">ÙƒÙŠÙ…ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 4:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø£Ø­Ø¯
              </div>
              <div class="class-details">
                Ø³ÙŠÙ‚Ø¯Ù‘Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø­ØµØ© Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø°ÙƒÙŠ ÙˆÙ…Ø´ÙˆÙ‚ ÙŠØ¨Ø¯Ø£ Ù…Ù† Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ù†Ø¬Ø§Ø­ ÙˆÙŠÙ†ØªÙ‡ÙŠ Ø¨Ø¥ØªÙ‚Ø§Ù† Ø­Ù‚ÙŠÙ‚ÙŠ... (ÙƒÙ…Ø§ Ù‡Ùˆ).
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§ØªÙ…ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>

          <div class="class-item" data-id="class6" onclick="selectClass('class6', 'ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://b.top4top.io/p_3632b08ub7.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‚Ø¨Ø§Ù„ÙŠ')">
              <img src="https://b.top4top.io/p_3632b08ub7.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‚Ø¨Ø§Ù„ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 8:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø£Ø­Ø¯
              </div>
              <div class="class-details">
                Ø³ÙŠÙ‚Ø¯Ù‘Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø­ØµØ© Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø¹Ù…Ù„ÙŠ Ø¬Ø°Ø§Ø¨ ÙŠØ±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ ØªØ¨Ø³ÙŠØ· Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† ÙˆØ§Ù„Ù…Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©...
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‚Ø¨Ø§Ù„ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>
        </div>

        <!-- ÙŠÙˆÙ… Ø§Ù„Ø§Ø«Ù†ÙŠÙ† -->
        <div class="day-label"><i class="far fa-calendar-alt"></i> Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</div>
        <div class="classes-grid">
          <div class="class-item" data-id="class5" onclick="selectClass('class5', 'ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø¹Ø§Ø´Ø±', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://i.top4top.io/p_3633v6k8e1.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‚Ø¨Ø§Ù„ÙŠ')">
              <img src="https://i.top4top.io/p_3633v6k8e1.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‚Ø¨Ø§Ù„ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø¹Ø§Ø´Ø±</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 8:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø§Ø«Ù†ÙŠÙ†
              </div>
              <div class="class-details">
                Ø³ÙŠÙ‚Ø¯Ù‘Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø³Ù„Ø³ ÙˆÙˆØ§Ø¶Ø­ ÙŠØ±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ ØªØ¨Ø³ÙŠØ· Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†...
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ù…Ù‚Ø¨Ø§Ù„ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>
        </div>

        <!-- ÙŠÙˆÙ… Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ -->
        <div class="day-label"><i class="far fa-calendar-alt"></i> Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</div>
        <div class="classes-grid">
          <div class="class-item" data-id="class3" onclick="selectClass('class3', 'English - Grade 12', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://d.top4top.io/p_3633gwl3r1.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†Ø¸Ø±ÙŠ')">
              <img src="https://d.top4top.io/p_3633gwl3r1.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†Ø¸Ø±ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">English - Grade 12</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 6:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡
              </div>
              <div class="class-details">
                Ø­ØµØ© Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†Ø¸Ø±ÙŠ... (ÙƒÙ…Ø§ Ù‡Ùˆ).
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†Ø¸Ø±ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>

          <div class="class-item" data-id="class9" onclick="selectClass('class9', 'Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù…Ù†', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://l.top4top.io/p_3633920oh1.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ„Ø¨Ø§Ù†ÙŠ')">
              <img src="https://l.top4top.io/p_3633920oh1.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ„Ø¨Ø§Ù†ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù…Ù†</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 7:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡
              </div>
              <div class="class-details">
                Ø­ØµØ© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„... (ÙƒÙ…Ø§ Ù‡Ùˆ).
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ„Ø¨Ø§Ù†ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>
        </div>

        <!-- ÙŠÙˆÙ… Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡ -->
        <div class="day-label"><i class="far fa-calendar-alt"></i> Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</div>
        <div class="classes-grid">
          <div class="class-item" data-id="class1" onclick="selectClass('class1', 'Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª - Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://h.top4top.io/p_36321dqtn1.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ø²Ø±ÙˆØ¹ÙŠ')">
              <img src="https://h.top4top.io/p_36321dqtn1.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ø²Ø±ÙˆØ¹ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª - Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 8:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡
              </div>
              <div class="class-details">
                Ø­ØµØ© Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ø²Ø±ÙˆØ¹ÙŠ... (ÙƒÙ…Ø§ Ù‡Ùˆ).
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ø²Ø±ÙˆØ¹ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>

          <div class="class-item" data-id="class2" onclick="selectClass('class2', 'Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://h.top4top.io/p_3633slai71.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ø§Ù„Ø¯ Ø§Ù„ÙƒÙ„Ø¨Ø§Ù†ÙŠ')">
              <img src="https://h.top4top.io/p_3633slai71.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ø§Ù„Ø¯ Ø§Ù„ÙƒÙ„Ø¨Ø§Ù†ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 9:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡
              </div>
              <div class="class-details">
                Ø­ØµØ© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ø§Ù„Ø¯ Ø§Ù„ÙƒÙ„Ø¨Ø§Ù†ÙŠ... (ÙƒÙ…Ø§ Ù‡Ùˆ).
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ø§Ù„Ø¯ Ø§Ù„ÙƒÙ„Ø¨Ø§Ù†ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>
        </div>

        <!-- ÙŠÙˆÙ… Ø§Ù„Ø®Ù…ÙŠØ³ -->
        <div class="day-label"><i class="far fa-calendar-alt"></i> Ø§Ù„Ø®Ù…ÙŠØ³</div>
        <div class="classes-grid">
          <div class="class-item" data-id="class7" onclick="selectClass('class7', 'ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://e.top4top.io/p_3633ak5lt1.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ø²ÙŠØ¯ÙŠ')">
              <img src="https://e.top4top.io/p_3633ak5lt1.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ø²ÙŠØ¯ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 4:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø®Ù…ÙŠØ³
              </div>
              <div class="class-details">
                Ø­ØµØ© Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ø²ÙŠØ¯ÙŠ... (ÙƒÙ…Ø§ Ù‡Ùˆ).
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†Ø§ØµØ± Ø§Ù„Ø²ÙŠØ¯ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>

          <div class="class-item" data-id="class8" onclick="selectClass('class8', 'ÙƒÙŠÙ…ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±', 3)">
            <div class="selected-badge"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</div>

            <div class="class-image-wrapper" onclick="openLightbox(event, 'https://g.top4top.io/p_3633g4p841.jpeg', 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø¹Ù…Ø±ÙŠ')">
              <img src="https://g.top4top.io/p_3633g4p841.jpeg" alt="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø¹Ù…Ø±ÙŠ">
              <div class="zoom-hint"><i class="fas fa-search-plus"></i> ØªÙƒØ¨ÙŠØ±</div>
            </div>

            <div class="class-content">
              <div class="class-header">
                <div class="class-title">ÙƒÙŠÙ…ÙŠØ§Ø¡ - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±</div>
                <div class="class-price">2 Ø±ÙŠØ§Ù„ <small>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ 3 Ø±ÙŠØ§Ù„ / Ø®ØµÙ… 1 Ø±ÙŠØ§Ù„</small></div>
              </div>
              <div class="class-details">
                <i class="far fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª: 5:00 Ù…Ø³Ø§Ø¡Ù‹
                &nbsp;|&nbsp;<i class="fas fa-calendar-day"></i> Ø§Ù„ÙŠÙˆÙ…: Ø§Ù„Ø®Ù…ÙŠØ³
              </div>
              <div class="class-details">
                Ø­ØµØ© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø¹Ù…Ø±ÙŠ... (ÙƒÙ…Ø§ Ù‡Ùˆ).
              </div>
              <div class="class-teacher"><i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ø£Ø³ØªØ§Ø° Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø¹Ù…Ø±ÙŠ â€“ Ø­ØµØ© Ø¹Ù† Ø¨Ø¹Ø¯</div>
            </div>
          </div>
        </div>

        <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± -->
        <div class="summary-card">
          <h3><i class="fas fa-receipt"></i> Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±</h3>
          <div class="summary-item"><span>Ø¹Ø¯Ø¯ Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:</span><span id="selectedCount">0</span></div>
          <div class="summary-item"><span>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø­ØµØ© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©:</span><span>3 Ø±ÙŠØ§Ù„Ø§Øª</span></div>
          <div class="summary-item"><span>Ø³Ø¹Ø± Ø§Ù„Ø­ØµØ© Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„:</span><span>2 Ø±ÙŠØ§Ù„</span></div>
          <div class="summary-item"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù‚Ø¨Ù„ Ø£ÙŠ Ø®ØµÙˆÙ…Ø§Øª:</span><span id="baseTotal">0 Ø±ÙŠØ§Ù„</span></div>
          <div class="summary-item"><span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø®ØµÙ… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ (1 Ø±ÙŠØ§Ù„ Ù„ÙƒÙ„ Ø­ØµØ©):</span><span id="weekDiscount">0 Ø±ÙŠØ§Ù„</span></div>
          <div class="summary-item" id="offerRow" style="display:none;">
            <span>Ø®ØµÙ… Ø¹Ø±Ø¶ 4 Ø­ØµØµ (Ø­ØµØ© Ù…Ø¬Ø§Ù†ÙŠØ©):</span>
            <span id="offerDiscount" style="color: var(--success);">0 Ø±ÙŠØ§Ù„</span>
          </div>
          <div class="summary-item highlight"><span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚:</span><span id="finalAmount">0 Ø±ÙŠØ§Ù„</span></div>
          <div class="summary-item" id="offerTypeRow" style="display:none;">
            <span>Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø¨Ù‚:</span>
            <span id="offerTypeText" style="color: var(--accent);">-</span>
          </div>
        </div>

        <div class="form-buttons">
          <button type="button" class="btn btn-secondary" disabled>
            <i class="fas fa-arrow-right btn-icon"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
          </button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">
            Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left btn-icon"></i>
          </button>
        </div>
      </div>

      <!-- ===================== Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ===================== -->
      <div class="form-step" id="step2">
        <div class="form-header">
          <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨</h2>
          <p>Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§: Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø¥Ù„Ø²Ø§Ù…ÙŠ Ù„Ø£Ù†Ù‡ Ø³ÙŠÙƒÙˆÙ† Ù‡Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø­ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯.</p>
        </div>

        <form id="basicInfoForm">
          <div class="form-grid">
            <div class="form-group">
              <label for="studentName" class="required">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ÙƒØ§Ù…Ù„Ø§Ù‹</label>
              <input type="text" id="studentName" name="studentName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ ÙˆØ§Ù„Ù‚Ø¨ÙŠÙ„Ø©" required>
              <div class="error-message" id="studentNameError"></div>
            </div>

            <div class="form-group">
              <label for="grade" class="required">Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</label>
              <select id="grade" name="grade" required>
                <option value="">Ø§Ø®ØªØ± Ø§Ù„ØµÙ</option>
                <option value="Ø§Ù„Ø®Ø§Ù…Ø³">Ø§Ù„Ø®Ø§Ù…Ø³</option>
                <option value="Ø§Ù„Ø³Ø§Ø¯Ø³">Ø§Ù„Ø³Ø§Ø¯Ø³</option>
                <option value="Ø§Ù„Ø³Ø§Ø¨Ø¹">Ø§Ù„Ø³Ø§Ø¨Ø¹</option>
                <option value="Ø§Ù„Ø«Ø§Ù…Ù†">Ø§Ù„Ø«Ø§Ù…Ù†</option>
                <option value="Ø§Ù„ØªØ§Ø³Ø¹">Ø§Ù„ØªØ§Ø³Ø¹</option>
                <option value="Ø§Ù„Ø¹Ø§Ø´Ø±">Ø§Ù„Ø¹Ø§Ø´Ø±</option>
                <option value="Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±">Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±</option>
                <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±</option>
              </select>
              <div class="error-message" id="gradeError"></div>
            </div>

            <div class="form-group">
              <label for="phone" class="required">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (ÙˆØ§ØªØ³Ø§Ø¨)</label>
              <input type="tel" id="phone" name="phone" placeholder="Ù…Ø«Ø§Ù„: 95xxxxxx" required>
              <div class="error-message" id="phoneError"></div>
              <div class="form-hint">Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­ØµØµ Ø¹Ø¨Ø± Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.</div>
            </div>

            <div class="form-group">
              <label for="email" class="required">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø¥Ù„Ø²Ø§Ù…ÙŠ)</label>
              <input type="email" id="email" name="email" placeholder="example@email.com" required>
              <div class="error-message" id="emailError"></div>
              <div class="form-hint">Ø§ÙƒØªØ¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¯Ø®Ù„ Ø¨Ù‡ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù„Ù„Ø­ØµØ© (Google Meet / Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…).</div>
            </div>
          </div>

          <div class="form-group">
            <label for="notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <textarea id="notes" name="notes" rows="3" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ Ø¸Ø±ÙˆÙ Ù…Ø¹ÙŠÙ†Ø©..."></textarea>
          </div>

          <div class="form-buttons">
            <button type="button" class="btn btn-secondary" onclick="prevStep()">
              <i class="fas fa-arrow-right btn-icon"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
            </button>
            <button type="button" class="btn btn-primary" onclick="nextStep()">
              Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left btn-icon"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- ===================== Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ ===================== -->
      <div class="form-step" id="step3">
        <div class="form-header">
          <h2>Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ</h2>
          <p>Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­ØµØµØŒ Ù‚Ù… Ø¨ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø«Ù… Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„.</p>
        </div>

        <div class="transfer-info">
          <h3><i class="fas fa-money-bill-wave"></i> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„</h3>
          <p>ÙŠØ±Ø¬Ù‰ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ø¸Ø§Ù‡Ø± ÙÙŠ Ø§Ù„Ù…Ù„Ø®Øµ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ§Ù„ÙŠ:</p>
          <p style="margin: 8px 0; font-weight: 900; font-size: 1.2rem;">
            Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„: <span style="direction:ltr; display:inline-block;">92147179</span>
          </p>
          <p>Ø«Ù… Ù‚Ù… Ø¨Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬.</p>
          <p style="color: var(--warning); margin-top: 8px; font-size: 0.9rem; font-weight: 900;">
            <i class="fas fa-exclamation-triangle"></i>
            ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶ÙˆØ­ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù„Ù…Ø¨Ù„Øº ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©.
          </p>
        </div>

        <div class="form-group">
          <label class="required">Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„</label>
          <div class="upload-area" id="uploadArea" onclick="document.getElementById('receiptFile').click()">
            <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
            <div class="upload-text">Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„</div>
            <div class="upload-hint">Ù…Ø³Ù…ÙˆØ­: JPG, PNG, PDF (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 5MB)</div>
          </div>
          <input type="file" id="receiptFile" name="receiptFile" accept="image/*,.pdf" style="display:none;" onchange="handleFileUpload(this.files)">
          <div class="error-message" id="receiptError"></div>
        </div>

        <div id="filePreview" style="display:none;"></div>

        <div class="form-hint" style="background: rgba(245,158,11,0.06); padding: 12px 14px; border-radius: var(--radius-md); margin-top: 10px;">
          <strong style="color: var(--warning); font-weight: 900;"><i class="fas fa-info-circle"></i> ØªØ°ÙƒÙŠØ±:</strong>
          <ul style="margin: 6px 0 0; padding-right: 18px; font-size: 0.85rem; color: var(--text-light); font-weight: 800;">
            <li>Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„Ø§ ÙŠÙØ¹ØªØ¨Ø± Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø±ÙØ¹ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„.</li>
            <li>ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù„Ø£ÙŠ Ø¯Ø¹Ù… Ø£Ùˆ Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ø¨Ø± Ø§Ù„Ø±Ù‚Ù…: <strong>74120010</strong>.</li>
          </ul>
        </div>

        <div class="form-buttons">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">
            <i class="fas fa-arrow-right btn-icon"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
          </button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">
            Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left btn-icon"></i>
          </button>
        </div>
      </div>

      <!-- ===================== Ø§Ù„Ø®Ø·ÙˆØ© 4: ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ===================== -->
      <div class="form-step" id="step4">
        <div class="form-header">
          <h2>Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„</h2>
          <p>Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©ØŒ Ø«Ù… ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨.</p>
        </div>

        <div id="registrationResult" class="registration-result"></div>

        <div id="summaryBeforeSubmit">
          <div class="summary-card">
            <h3><i class="fas fa-clipboard-check"></i> Ù…Ù„Ø®Øµ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ§Ù„Ø­ØµØµ</h3>
            <div class="summary-item"><span>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</span><span id="summaryName">-</span></div>
            <div class="summary-item"><span>Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ:</span><span id="summaryGrade">-</span></div>
            <div class="summary-item"><span>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</span><span id="summaryPhone">-</span></div>
            <div class="summary-item"><span>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</span><span id="summaryEmail">-</span></div>

            <div class="summary-item" style="border-top:1px solid rgba(0,0,0,0.06); margin-top:8px; padding-top:8px;">
              <span>Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:</span><span id="summaryClasses">-</span>
            </div>
            <div class="summary-item"><span>Ø¹Ø¯Ø¯ Ø§Ù„Ø­ØµØµ:</span><span id="summaryCount">-</span></div>
            <div class="summary-item"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (3 Ø±ÙŠØ§Ù„ Ù„ÙƒÙ„ Ø­ØµØ©):</span><span id="summaryBaseTotal">-</span></div>
            <div class="summary-item"><span>Ø®ØµÙ… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„ (1 Ø±ÙŠØ§Ù„ Ù„ÙƒÙ„ Ø­ØµØ©):</span><span id="summaryWeekDiscount">-</span></div>
            <div class="summary-item" id="summaryOfferRow" style="display:none;">
              <span>Ø®ØµÙ… Ø¹Ø±Ø¶ 4 Ø­ØµØµ (Ø­ØµØ© Ù…Ø¬Ø§Ù†ÙŠØ©):</span><span id="summaryOfferDiscount">-</span>
            </div>
            <div class="summary-item highlight"><span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚:</span><span id="summaryFinal">-</span></div>
          </div>

          <div class="form-group" style="margin-top:18px;">
            <div style="background: rgba(106,45,243,0.05); padding: 14px 14px; border-radius: var(--radius-md); font-size: 0.9rem; font-weight: 800;">
              <strong style="color: var(--primary-dark); font-weight: 900;">Ø§Ù„Ø´Ø±ÙˆØ·:</strong>
              <ul style="margin: 6px 0 0; padding-right: 18px; color: var(--text-light); font-weight: 800;">
                <li>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµØµ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚Ø¯Ù… Ø¹Ù† Ø¨Ø¹Ø¯ (Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†).</li>
                <li>Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØªÙŠ Ø§Ø®ØªØ§Ø±Ù‡Ø§.</li>
                <li>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø®Ù„ Ù‡Ùˆ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø­ØµØ©.</li>
                <li>ÙŠÙ…ÙƒÙ† Ø·Ù„Ø¨ Ø¯Ø¹Ù… ÙÙ†ÙŠ Ø£Ùˆ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ø¨Ø± Ø±Ù‚Ù… Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©: <strong>74120010</strong>.</li>
              </ul>
            </div>
          </div>

          <div class="form-group">
            <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-weight: 900;">
              <input type="checkbox" id="agreeTerms" style="width:auto;">
              <span>Ø£Ù‚Ø± Ø¨Ø£Ù†Ù†ÙŠ Ø§Ø·Ù„Ø¹Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø¹Ù„Ø§Ù‡ ÙˆØ£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·.</span>
            </label>
            <div class="error-message" id="termsError"></div>
          </div>

          <div class="loader" id="loader">
            <div class="loader-spinner"></div>
            <p id="loaderText" style="font-weight: 900;">Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨...</p>
          </div>

          <div class="form-buttons">
            <button type="button" class="btn btn-secondary" onclick="prevStep()">
              <i class="fas fa-arrow-right btn-icon"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
            </button>
            <button type="button" class="btn btn-success" onclick="submitRegistration()" id="submitBtn">
              <i class="fas fa-paper-plane btn-icon"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
            </button>
          </div>
        </div>
      </div>

    </div>

    <!-- Ø£Ø²Ø±Ø§Ø± Ø¥Ø¶Ø§ÙÙŠØ© -->
    <div style="text-align:center; margin: 22px 0;">
      <button onclick="testGoogleSheetsConnection()" class="btn btn-warning" style="margin:6px;">
        <i class="fas fa-wifi btn-icon"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Google Sheets
      </button>
      <button onclick="resetForm()" class="btn btn-secondary" style="margin:6px;">
        <i class="fas fa-redo btn-icon"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
      </button>
    </div>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <div class="footer">
      <div class="contact-info">
        <div class="contact-item"><i class="fas fa-phone-alt"></i><span>Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø± ÙˆØ§Ù„Ø¯Ø¹Ù…: 74120010</span></div>
        <div class="contact-item"><i class="fas fa-money-bill-wave"></i><span>Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„: 92147179</span></div>
        <div class="contact-item"><i class="fas fa-clock"></i><span>Ø³Ø§Ø¹Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„: 4 Ù…Ø³Ø§Ø¡Ù‹ - 10 Ù…Ø³Ø§Ø¡Ù‹</span></div>
      </div>
      <p style="margin-top: 12px;">Â© 2025 Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù„Ù‡Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© â€“ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¹Ù† Ø¨Ø¹Ø¯ (Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„).</p>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <div class="lightbox-content" onclick="event.stopPropagation()">
      <button class="lightbox-close" onclick="closeLightbox()">
        <i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚
      </button>
      <img class="lightbox-img" id="lightboxImg" src="" alt="">
    </div>
  </div>

  <script>
    // ================== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ==================
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLqxq_4lyr8M6chfYqkQtUmI-yu08cfpe9A7ldsV1mwdEAKxCYkm7kq0CF3MCBMNr28g/exec';

    const BASE_PRICE = 3;
    const WEEK_DISCOUNT_PER_CLASS = 1;
    const EFFECTIVE_PRICE = BASE_PRICE - WEEK_DISCOUNT_PER_CLASS; // 2
    const FREE_CLASSES_THRESHOLD = 4;
    const FREE_CLASSES = 1;

    let currentStep = 1;
    let selectedClasses = [];
    let uploadedFile = null;
    let studentData = {};
    let priceInfo = { count: 0, baseTotal: 0, weekDiscount: 0, offerDiscount: 0, final: 0, offerText: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯' };

    // ============ Lightbox ============
    function openLightbox(e, imgUrl, altText) {
      e.stopPropagation(); // Ø­ØªÙ‰ Ù„Ø§ ÙŠØ®ØªØ§Ø± Ø§Ù„Ø­ØµØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©
      const lb = document.getElementById('lightbox');
      const img = document.getElementById('lightboxImg');
      img.src = imgUrl;
      img.alt = altText || '';
      lb.classList.add('active');
    }
    function closeLightbox() {
      const lb = document.getElementById('lightbox');
      const img = document.getElementById('lightboxImg');
      lb.classList.remove('active');
      img.src = '';
      img.alt = '';
    }

    // ============ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø·ÙˆØ§Øª ============
    function updateProgress() {
      const bar = document.getElementById('progressBar');
      const percent = ((currentStep - 1) / 3) * 100;
      bar.style.width = percent + '%';

      document.querySelectorAll('.step').forEach((step, index) => {
        const num = index + 1;
        step.classList.remove('active', 'completed');
        if (num < currentStep) step.classList.add('completed');
        else if (num === currentStep) step.classList.add('active');
      });
    }

    function showStep(step) {
      document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));
      document.getElementById('step' + step).classList.add('active');
      currentStep = step;
      updateProgress();
      if (step === 4) updateSummaryBeforeSubmit();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function nextStep() {
      if (!validateStep(currentStep)) return;

      // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© 2 Ø§Ù„Ø¢Ù†
      if (currentStep === 2) saveStep2StudentInfo();

      showStep(currentStep + 1);
    }

    function prevStep() {
      if (currentStep > 1) showStep(currentStep - 1);
    }

    // ============ Ø§Ù„ØªØ­Ù‚Ù‚ ============
    function validateStep(step) {
      let valid = true;
      document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');

      // step 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­ØµØµ
      if (step === 1) {
        if (selectedClasses.length === 0) {
          showMessage('error', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø­ØµØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©.');
          valid = false;
        }
      }

      // step 2: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø¥Ù„Ø²Ø§Ù…ÙŠ)
      if (step === 2) {
        const name = document.getElementById('studentName').value.trim();
        const grade = document.getElementById('grade').value;
        const phone = document.getElementById('phone').value.trim();
        const email = document.getElementById('email').value.trim();

        if (!name) { showError('studentNameError', 'Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨'); valid = false; }
        if (!grade) { showError('gradeError', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙ'); valid = false; }

        if (!phone || !/^[0-9]{8,9}$/.test(phone)) {
          showError('phoneError', 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­');
          valid = false;
        }

        // ØªØ­Ù‚Ù‚ Ø¥ÙŠÙ…ÙŠÙ„ Ù‚ÙˆÙŠ
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;
        if (!email) {
          showError('emailError', 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¥Ù„Ø²Ø§Ù…ÙŠ');
          valid = false;
        } else if (!emailRegex.test(email)) {
          showError('emailError', 'ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
          valid = false;
        }
      }

      // step 3: Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„
      if (step === 3) {
        if (!uploadedFile) {
          showError('receiptError', 'Ø±ÙØ¹ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨ Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©');
          valid = false;
        }
      }

      // step 4: Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
      if (step === 4) {
        if (!document.getElementById('agreeTerms').checked) {
          showError('termsError', 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„');
          valid = false;
        }
      }

      return valid;
    }

    function showError(id, msg) {
      const el = document.getElementById(id);
      if (el) {
        el.textContent = msg;
        el.style.display = 'block';
      }
    }

    // ============ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø§Ù„Ø®Ø·ÙˆØ© 2) ============
    function saveStep2StudentInfo() {
      studentData = {
        name: document.getElementById('studentName').value.trim(),
        grade: document.getElementById('grade').value,
        phone: document.getElementById('phone').value.trim(),
        email: document.getElementById('email').value.trim(),
        notes: document.getElementById('notes').value.trim()
      };
    }

    // ============ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­ØµØµ ============
    function selectClass(id, title, price) {
      const el = document.querySelector('.class-item[data-id="' + id + '"]');
      if (!el) return;

      const badge = el.querySelector('.selected-badge');
      const index = selectedClasses.findIndex(c => c.id === id);

      if (index === -1) {
        selectedClasses.push({ id, title, price });
        el.classList.add('selected');
        if (badge) badge.style.display = 'flex';
      } else {
        selectedClasses.splice(index, 1);
        el.classList.remove('selected');
        if (badge) badge.style.display = 'none';
      }

      updatePrice();
    }

    function updatePrice() {
      const count = selectedClasses.length;
      const baseTotal = count * BASE_PRICE;
      const weekDiscount = count * WEEK_DISCOUNT_PER_CLASS;

      let offerDiscount = 0;
      let offerText = 'Ù„Ø§ ÙŠÙˆØ¬Ø¯';

      if (count >= FREE_CLASSES_THRESHOLD) {
        offerDiscount = EFFECTIVE_PRICE * FREE_CLASSES;
        offerText = 'Ø¹Ø±Ø¶ 4 Ø­ØµØµ Ø¨Ù€ 6 Ø±ÙŠØ§Ù„Ø§Øª (Ø­ØµØ© ÙˆØ§Ø­Ø¯Ø© Ù…Ø¬Ø§Ù†Ù‹Ø§)';
      }

      const final = baseTotal - weekDiscount - offerDiscount;
      priceInfo = { count, baseTotal, weekDiscount, offerDiscount, final, offerText };

      document.getElementById('selectedCount').textContent = count;
      document.getElementById('baseTotal').textContent = baseTotal + ' Ø±ÙŠØ§Ù„';
      document.getElementById('weekDiscount').textContent = weekDiscount + ' Ø±ÙŠØ§Ù„';
      document.getElementById('finalAmount').textContent = final + ' Ø±ÙŠØ§Ù„';

      const offerRow = document.getElementById('offerRow');
      const offerTypeRow = document.getElementById('offerTypeRow');
      if (offerDiscount > 0) {
        offerRow.style.display = 'flex';
        offerTypeRow.style.display = 'flex';
        document.getElementById('offerDiscount').textContent = '-' + offerDiscount + ' Ø±ÙŠØ§Ù„';
        document.getElementById('offerTypeText').textContent = offerText;
      } else {
        offerRow.style.display = 'none';
        offerTypeRow.style.display = 'none';
      }
    }

    // ============ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù ============
    function handleFileUpload(files) {
      if (!files || !files.length) return;
      const file = files[0];

      if (file.size > 5 * 1024 * 1024) {
        alert('Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ± (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5MB)');
        return;
      }

      if (!file.type.match(/image\/(jpeg|png|jpg)|application\/pdf/)) {
        alert('Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…ØŒ ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø£Ùˆ Ù…Ù„Ù PDF');
        return;
      }

      uploadedFile = file;

      const preview = document.getElementById('filePreview');
      preview.innerHTML = `
        <div class="file-preview">
          <div class="file-info">
            <div class="file-icon">
              <i class="fas fa-${file.type.includes('image') ? 'file-image' : 'file-pdf'}"></i>
            </div>
            <div>
              <div class="file-name">${file.name}</div>
              <div class="file-size">${(file.size / 1024).toFixed(1)} ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª</div>
            </div>
          </div>
          <button class="file-remove" onclick="removeFile()"><i class="fas fa-times"></i></button>
        </div>
      `;
      preview.style.display = 'block';
    }

    function removeFile() {
      uploadedFile = null;
      const input = document.getElementById('receiptFile');
      if (input) input.value = '';
      document.getElementById('filePreview').style.display = 'none';
    }

    // ============ Ù…Ù„Ø®Øµ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ============
    function updateSummaryBeforeSubmit() {
      document.getElementById('summaryName').textContent = studentData.name || '-';
      document.getElementById('summaryGrade').textContent = studentData.grade || '-';
      document.getElementById('summaryPhone').textContent = studentData.phone || '-';
      document.getElementById('summaryEmail').textContent = studentData.email || '-';

      const classesNames = selectedClasses.map(c => c.title).join('ØŒ ');
      document.getElementById('summaryClasses').textContent = classesNames || '-';
      document.getElementById('summaryCount').textContent = priceInfo.count || 0;
      document.getElementById('summaryBaseTotal').textContent = priceInfo.baseTotal + ' Ø±ÙŠØ§Ù„';
      document.getElementById('summaryWeekDiscount').textContent = '-' + priceInfo.weekDiscount + ' Ø±ÙŠØ§Ù„';
      document.getElementById('summaryFinal').textContent = priceInfo.final + ' Ø±ÙŠØ§Ù„';

      const summaryOfferRow = document.getElementById('summaryOfferRow');
      if (priceInfo.offerDiscount > 0) {
        summaryOfferRow.style.display = 'flex';
        document.getElementById('summaryOfferDiscount').textContent = '-' + priceInfo.offerDiscount + ' Ø±ÙŠØ§Ù„';
      } else {
        summaryOfferRow.style.display = 'none';
      }
    }

    // ============ API Ù…Ø¨Ø³Ø· Ù…Ø¹ Google Apps Script ============
    async function testConnection() {
      try {
        showMessage('info', 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ...');
        const url = GOOGLE_SCRIPT_URL + '?action=test&t=' + Date.now();
        const response = await fetch(url);
        const data = await response.json();

        if (data.success) showMessage('success', 'âœ… Ø§ØªØµØ§Ù„ Ù†Ø§Ø¬Ø­ Ù…Ø¹ Google Sheets');
        else showMessage('error', 'âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ' + (data.message || 'Ù…Ø´ÙƒÙ„Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©'));
      } catch (error) {
        console.error(error);
        showMessage('error', 'âŒ ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„: ' + error.message);
      }
    }

    async function submitRegistration() {
      if (!document.getElementById('agreeTerms').checked) {
        showError('termsError', 'ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„');
        return;
      }

      if (priceInfo.count === 0) {
        alert('Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø­ØµØ©.');
        return;
      }

      const classesText = selectedClasses.map(c => c.title).join('ØŒ ');

      const data = {
        action: 'submit',
        name: studentData.name,
        grade: studentData.grade,
        phone: studentData.phone,
        email: studentData.email,
        classes: classesText,
        count: String(priceInfo.count),
        total: String(priceInfo.baseTotal),
        discount: String(priceInfo.weekDiscount + priceInfo.offerDiscount),
        final: String(priceInfo.final),
        offer: priceInfo.offerText,
        file: uploadedFile ? uploadedFile.name : '',
        notes: studentData.notes
      };

      document.getElementById('loader').style.display = 'block';
      document.getElementById('submitBtn').disabled = true;
      document.getElementById('submitBtn').classList.add('btn-disabled');

      try {
        const params = new URLSearchParams();
        Object.keys(data).forEach(key => params.append(key, data[key]));

        const response = await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: params.toString()
        });

        const result = await response.json();

        if (result.success) {
          showSuccess(result.ref);
        } else {
          alert('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ' + (result.message || ''));
          document.getElementById('submitBtn').disabled = false;
          document.getElementById('submitBtn').classList.remove('btn-disabled');
        }
      } catch (error) {
        console.error(error);
        alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ' + error.message);
        document.getElementById('submitBtn').disabled = false;
        document.getElementById('submitBtn').classList.remove('btn-disabled');
      } finally {
        document.getElementById('loader').style.display = 'none';
      }
    }

    function showSuccess(refId) {
      document.getElementById('summaryBeforeSubmit').style.display = 'none';

      const resultDiv = document.getElementById('registrationResult');
      const classesText = selectedClasses.map(c => c.title).join('ØŒ ');

      resultDiv.innerHTML = `
        <div class="success-message">
          <div class="success-icon"><i class="fas fa-check-circle"></i></div>
          <h3>ğŸ‰ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø­ØµØµ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯ Ø¨Ù†Ø¬Ø§Ø­</h3>
          <div class="reference-id">
            <span>Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„Ø®Ø§Øµ Ø¨Ø·Ù„Ø¨Ùƒ:</span>
            <strong>${refId}</strong>
          </div>
          <p style="color: #4b5563; font-size: 0.9rem; margin: 8px 0 4px; font-weight: 900;">
            âœ… ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ§Ù„Ø­ØµØµ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù….<br>
            ğŸ“± Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙØ§ØµÙŠÙ„.
          </p>
          <div class="summary-card" style="margin-top:12px; text-align:right;">
            <h3 style="margin-bottom:8px;"><i class="fas fa-list"></i> Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹:</h3>
            <div class="summary-item"><span>Ø§Ù„Ø·Ø§Ù„Ø¨:</span><span>${studentData.name}</span></div>
            <div class="summary-item"><span>Ø§Ù„ØµÙ:</span><span>${studentData.grade}</span></div>
            <div class="summary-item"><span>Ø§Ù„Ù‡Ø§ØªÙ:</span><span>${studentData.phone}</span></div>
            <div class="summary-item"><span>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</span><span>${studentData.email}</span></div>
            <div class="summary-item"><span>Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:</span><span>${classesText}</span></div>
            <div class="summary-item"><span>Ø¹Ø¯Ø¯ Ø§Ù„Ø­ØµØµ:</span><span>${priceInfo.count}</span></div>
            <div class="summary-item"><span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span><span>${priceInfo.final} Ø±ÙŠØ§Ù„</span></div>
          </div>
          <div class="action-buttons" style="margin-top:16px; display:flex; flex-wrap:wrap; justify-content:center; gap:10px;">
            <button class="btn btn-primary" onclick="copyWhatsAppSummary('${refId}')">
              <i class="fab fa-whatsapp"></i> Ù†Ø³Ø® Ù…Ù„Ø®Øµ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨
            </button>
            <button class="btn btn-success" onclick="resetForm()">
              <i class="fas fa-plus"></i> ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
            </button>
          </div>
        </div>
      `;
      resultDiv.style.display = 'block';
    }

    function buildWhatsAppSummary(refId) {
      const classesText = selectedClasses.map(c => c.title).join('ØŒ ');
      return [
        'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù„Ù‡Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© â€“ ØªØ³Ø¬ÙŠÙ„ Ø­ØµØµ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯',
        '--------------------------------------',
        'Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹: ' + refId,
        'Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: ' + (studentData.name || ''),
        'Ø§Ù„ØµÙ: ' + (studentData.grade || ''),
        'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ' + (studentData.phone || ''),
        'Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­ØµØ©): ' + (studentData.email || ''),
        'Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©: ' + classesText,
        'Ø¹Ø¯Ø¯ Ø§Ù„Ø­ØµØµ: ' + priceInfo.count,
        'Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª: ' + priceInfo.final + ' Ø±ÙŠØ§Ù„',
        (priceInfo.offerText && priceInfo.offerText !== 'Ù„Ø§ ÙŠÙˆØ¬Ø¯' ? 'Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø¨Ù‚: ' + priceInfo.offerText : ''),
        '--------------------------------------',
        'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù„Ù‡Ù… ÙÙŠ Ø®Ø¯Ù…ØªÙƒ ğŸŒŸ'
      ].filter(Boolean).join('\n');
    }

    async function copyWhatsAppSummary(refId) {
      const text = buildWhatsAppSummary(refId);
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
          alert('âœ… ØªÙ… Ù†Ø³Ø® Ù…Ù„Ø®Øµ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ù„ØµÙ‚Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.');
        } else {
          const temp = document.createElement('textarea');
          temp.value = text;
          document.body.appendChild(temp);
          temp.select();
          document.execCommand('copy');
          document.body.removeChild(temp);
          alert('âœ… ØªÙ… Ù†Ø³Ø® Ù…Ù„Ø®Øµ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ù„ØµÙ‚Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.');
        }
      } catch (error) {
        alert('ØªØ¹Ø°Ø± Ù†Ø³Ø® Ø§Ù„Ù†ØµØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ù†Ø³Ø®Ù‡ ÙŠØ¯ÙˆÙŠÙ‹Ø§:\n\n' + text);
      }
    }

    // ============ Ø±Ø³Ø§Ø¦Ù„ Ø¹Ù„ÙˆÙŠØ© ============
    function showMessage(type, text) {
      const types = {
        success: { el: 'successMessage', txt: 'successText' },
        error: { el: 'errorMessage', txt: 'errorText' },
        info: { el: 'infoMessage', txt: 'infoText' }
      };

      Object.values(types).forEach(t => { document.getElementById(t.el).style.display = 'none'; });

      const msg = types[type];
      if (msg) {
        document.getElementById(msg.el).style.display = 'block';
        document.getElementById(msg.txt).textContent = text;
        setTimeout(() => { document.getElementById(msg.el).style.display = 'none'; }, 5000);
      }
    }

    // ============ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ============
    function resetForm() {
      const form = document.getElementById('basicInfoForm');
      if (form) form.reset();

      selectedClasses = [];
      uploadedFile = null;
      studentData = {};
      priceInfo = { count: 0, baseTotal: 0, weekDiscount: 0, offerDiscount: 0, final: 0, offerText: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯' };

      document.querySelectorAll('.class-item.selected').forEach(el => {
        el.classList.remove('selected');
        const badge = el.querySelector('.selected-badge');
        if (badge) badge.style.display = 'none';
      });

      document.getElementById('filePreview').style.display = 'none';
      document.getElementById('agreeTerms').checked = false;

      updatePrice();

      document.getElementById('summaryBeforeSubmit').style.display = 'block';
      document.getElementById('registrationResult').style.display = 'none';

      showStep(1);
      document.getElementById('submitBtn').disabled = false;
      document.getElementById('submitBtn').classList.remove('btn-disabled');

      showMessage('success', 'âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù†Ø¬Ø§Ø­');
    }

    // ============ ØªÙ‡ÙŠØ¦Ø© ============
    document.addEventListener('DOMContentLoaded', function () {
      updateProgress();
      updatePrice();

      // Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª
      const uploadArea = document.getElementById('uploadArea');
      if (uploadArea) {
        uploadArea.addEventListener('dragover', e => { e.preventDefault(); uploadArea.classList.add('dragover'); });
        uploadArea.addEventListener('dragleave', e => { e.preventDefault(); uploadArea.classList.remove('dragover'); });
        uploadArea.addEventListener('drop', e => {
          e.preventDefault();
          uploadArea.classList.remove('dragover');
          if (e.dataTransfer.files.length) handleFileUpload(e.dataTransfer.files);
        });
      }

      // Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Ø®ÙÙŠÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
      setTimeout(() => { testConnection(); }, 1500);
    });

    function testGoogleSheetsConnection() { testConnection(); }
  </script>
</body>
</html>
